<!--
  Generated template for the CrearAnuncio page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title *ngIf="!hasService">Crea tu anuncio</ion-title>
    <ion-title *ngIf="hasService">Modifica tu anuncio</ion-title>
  </ion-navbar>

</ion-header>

<ion-content >
  <form [formGroup]="formulario" (ngSubmit)="crearAnuncio()" novalidate>
    <div class="div-fields">
      <ion-label class="titulo-style" stacked>Añade fotos a tu anuncio</ion-label>
      <div id="añade-fotos">

        <div (click)="addPhoto('1')" class="bloque-add">
          <ion-icon *ngIf="!foto1&&!foto1Preview" name="camera"></ion-icon>
          <img *ngIf="foto1Preview" [src]="foto1Preview">
        </div>
        <div (click)="addPhoto('2')" class="bloque-add">
          <ion-icon *ngIf="!foto2&&!foto2Preview" name="camera"></ion-icon>
          <img *ngIf="foto2Preview" [src]="foto2Preview">
        </div>
        <div (click)="addPhoto('3')" class="bloque-add">
          <ion-icon *ngIf="!foto3&&!foto3Preview" name="camera"></ion-icon>
          <img *ngIf="foto3Preview" [src]="foto3Preview">

        </div>
      </div>
    </div>


    <div class="div-fields">
      <ion-label class="titulo-style" stacked>Tarifas y servicios</ion-label>
      <p (click)="addTarifa()"  class="white">Añade tus tarifas<ion-icon class="right-icon" name="add"></ion-icon></p>
      <ion-list *ngFor="let tarifa of tarifasArray">
        <ion-card class="card-tarifa">
          <ion-card-header><ion-card-title>{{tarifa.nombre}}</ion-card-title></ion-card-header>
          <ion-card-content>
            <ion-list>
              <li *ngIf="tarifa.desc0">{{tarifa.desc0}}</li>
              <li *ngIf="tarifa.desc1">{{tarifa.desc1}}</li>
              <li *ngIf="tarifa.desc2">{{tarifa.desc2}}</li>
          </ion-list>
            <ion-badge>Precio: {{tarifa.precio}} €</ion-badge>
          </ion-card-content>
        </ion-card>
      </ion-list>
      <ion-item *ngIf="formulario.get('tarifas').errors && formulario.get('tarifas').dirty">
        <p color="danger" ion-text *ngIf="formulario.get('tarifas').hasError('required')">Añade un campo a tu anuncio</p>

      </ion-item>
    </div>

    <div class="div-fields">
      <ion-label class="titulo-style" stacked>Elige una especialidad</ion-label>
      <ion-select multiple="true"  class="white especialidad-select"  formControlName="especialidad"  placeholder="Especialidad">
        <ion-option *ngFor="let especialidad of especialidades|async">{{especialidad.$key}}</ion-option>
      </ion-select>
    </div>

    <div class="div-fields">
      <ion-label class="titulo-style" stacked>Selecciona tus horarios de entrenamiento</ion-label>
      <div id="h-lunes" formGroupName="horarios" class="separator">
        <p (click)="mostrarFranjas(L)" #L id="L"  class="white">Lunes<ion-icon class="right-icon" name="add"></ion-icon></p>
        <div *ngIf="franjasShow[0]" class="center" formGroupName="lunes" id="franjas-lunes">
          <span>Puedes añadir hasta 3 franjas horarias</span>

          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Desde " class="white " formControlName="franja1From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Hasta" class="white " formControlName="franja1To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Desde" class="white" formControlName="franja2From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Hasta" class="white" formControlName="franja2To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Desde" class="white" formControlName="franja3From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Hasta" class="white" formControlName="franja3To"></ion-datetime>

        </div>
      </div>
      <div id="h-martes" formGroupName="horarios" class="separator">
        <p (click)="mostrarFranjas(M)" #M id="M"  class="white">Martes<ion-icon class="right-icon" name="add"></ion-icon></p>
        <div *ngIf="franjasShow[1]" id="franjas-martes"  formGroupName="martes" class="center">
          <span>Puedes añadir hasta 3 franjas horarias</span>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Desde " class="white " formControlName="franja1From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Hasta" class="white " formControlName="franja1To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Desde" class="white" formControlName="franja2From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Hasta" class="white" formControlName="franja2To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Desde" class="white" formControlName="franja3From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Hasta" class="white" formControlName="franja3To"></ion-datetime>

        </div>
      </div>
      <div id="h-miercoles" formGroupName="horarios" class="separator">
        <p (click)="mostrarFranjas(X)" #X id="X"  class="white">Miercoles<ion-icon class="right-icon" name="add"></ion-icon></p>
        <div *ngIf="franjasShow[2]" class="center" formGroupName="miercoles" id="franjas-miercoles">
          <span>Puedes añadir hasta 3 franjas horarias</span>

          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Desde " class="white " formControlName="franja1From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Hasta" class="white " formControlName="franja1To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Desde" class="white" formControlName="franja2From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Hasta" class="white" formControlName="franja2To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Desde" class="white" formControlName="franja3From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Hasta" class="white" formControlName="franja3To"></ion-datetime>

        </div>
      </div>
      <div id="h-jueves" formGroupName="horarios" class="separator">
        <p (click)="mostrarFranjas(J)" #J id="J"  class="white">Jueves<ion-icon class="right-icon" name="add"></ion-icon></p>
        <div *ngIf="franjasShow[3]" id="franjas-jueves" formGroupName="jueves" class="center">
          <span>Puedes añadir hasta 3 franjas horarias</span>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Desde " class="white " formControlName="franja1From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Hasta" class="white " formControlName="franja1To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Desde" class="white" formControlName="franja2From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Hasta" class="white" formControlName="franja2To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Desde" class="white" formControlName="franja3From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Hasta" class="white" formControlName="franja3To"></ion-datetime>

        </div>
      </div>
      <div id="h-viernes" formGroupName="horarios" class="separator">
        <p (click)="mostrarFranjas(V)" #V id="V"  class="white">Viernes<ion-icon class="right-icon" name="add"></ion-icon></p>
        <div *ngIf="franjasShow[4]" class="center" formGroupName="viernes" id="franjas-viernes">
          <span>Puedes añadir hasta 3 franjas horarias</span>

          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Desde " class="white " formControlName="franja1From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Hasta" class="white " formControlName="franja1To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Desde" class="white" formControlName="franja2From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Hasta" class="white" formControlName="franja2To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Desde" class="white" formControlName="franja3From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Hasta" class="white" formControlName="franja3To"></ion-datetime>

        </div>
      </div>
      <div id="h-sabado" formGroupName="horarios" class="separator">
        <p (click)="mostrarFranjas(S)" #S id="S"  class="white">Sábado<ion-icon class="right-icon" name="add"></ion-icon></p>
        <div *ngIf="franjasShow[5]" id="franjas-sabado" formGroupName="sabado" class="center">
          <span>Puedes añadir hasta 3 franjas horarias</span>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Desde " class="white " formControlName="franja1From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Hasta" class="white " formControlName="franja1To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Desde" class="white" formControlName="franja2From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Hasta" class="white" formControlName="franja2To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Desde" class="white" formControlName="franja3From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Hasta" class="white" formControlName="franja3To"></ion-datetime>

        </div>
      </div>
        <div id="h-domingo" formGroupName="horarios" class="separator">
        <p (click)="mostrarFranjas(D)" #D id="D"  class="white">Domingo<ion-icon class="right-icon" name="add"></ion-icon></p>
        <div *ngIf="franjasShow[6]" class="center" formGroupName="domingo" id="franjas-domingo">
          <span>Puedes añadir hasta 3 franjas horarias</span>

          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Desde " class="white " formControlName="franja1From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 1 - Hasta" class="white " formControlName="franja1To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Desde" class="white" formControlName="franja2From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 2 - Hasta" class="white" formControlName="franja2To"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Desde" class="white" formControlName="franja3From"></ion-datetime>
          <ion-datetime displayFormat="HH:mm" placeholder="Franja 3 - Hasta" class="white" formControlName="franja3To"></ion-datetime>

        </div>
      </div>
    </div>
    <div class="div-fields">
      <ion-label class="titulo-style">Lugares de entrenamiento</ion-label>
      <ion-list *ngIf="lugares">
        <ion-item *ngFor="let lugar of lugares">{{lugar.nombre}}</ion-item>
      </ion-list>
      <ion-buttons >
        <button type="button" style="width: 100%;" ion-button (click)="irAlMapa()">Ir al mapa </button>
      </ion-buttons>
    </div>
    <div style="width: 100%;float: left;" padding>
      <button ion-button block type="submit" [disabled]="formulario.invalid">Crear anuncio</button>
    </div>
  </form>
</ion-content>

